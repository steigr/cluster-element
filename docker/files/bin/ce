#!/usr/bin/env ruby

class Installer
  def install names
    names = names.collect{|name| name unless `apk info` =~ /^#{name}$/ }.join(" ").strip
    ( puts "APK: #{names}"; `apk add --update #{names}` ) unless names.empty?
    self
  end
  def gems names
    names = names.collect{|name| name if `gem list -q #{name}`.strip.empty? }.join(" ").strip
    ( puts "GEM: #{names}"; `gem update --system --no-ri --no-rdoc; gem install --no-ri --no-rdoc #{names}` ) unless names.empty?
    self
  end
end

Installer.new.install(%w{git docker ruby-dev bash}).gems(%w{foreman thor})

$LOAD_PATH << "/usr/lib"
require "cluster-element/cli"
ClusterElement::Cli.start